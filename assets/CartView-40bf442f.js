import{c as f}from"./useCartStore-5e0b380a.js";import{a as y,m as T,_ as V,r as c,o as l,c as i,b as t,F as g,i as P,e as h,t as d,j as b,d as n,w,n as x,k as E,l as A}from"./index-647ca239.js";import{s as k}from"./useSweetAlertStore-e020aee8.js";const{VITE_APP_URL:I,VITE_APP_PATH:B}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w8/",MODE:"production",DEV:!1,PROD:!0},D={data(){return{loadingItem:"",finalTotal:""}},computed:{...y(f,["carts"])},methods:{...T(f,["getCartData","deleteOneCart"]),swalClearCart(){this.$swal({title:"真的要清掉已選好商品嗎？",text:"清除後，只能重新挑選商品，無法復原唷 :(",icon:"warning",showCancelButton:!0,confirmButtonText:"堅決清空重來",cancelButtonText:"先不用"}).then(s=>{s.isConfirmed&&this.cleanAllCart()})},cleanAllCart(){this.$http.delete(`${I}/v2/api/${B}/carts`).then(s=>{this.$swal("購物車已清空，重新選新的餐點吧！"),this.$router.push("/products")}).catch(s=>{this.swalError(s)})},swalToastTopEnd(s){this.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"success",title:s})},swalError(s){this.$swal({showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"OK",toast:!0,icon:"error",title:s,text:"請重新操作，若再次出現請通知管理者，謝謝"})}},mounted(){this.getCartData()}},U={class:"table align-middle w-100 border-secondary p-1"},O=t("thead",null,[t("tr",{class:"w-100"},[t("th",null,"品名"),t("th",{class:"text-nowrap text-center"},"單價"),t("th",{class:"text-nowrap text-center"},"數量"),t("th",{class:"text-nowrap text-center"},"小計"),t("th")])],-1),R={class:"w-100"},S={key:0,class:"text-success"},L={class:"text-center"},H={class:"text-center"},N={class:"text-center"},F=["onClick","disabled"],j={key:0,class:"fas fa-spinner fa-pulse"},q={class:"border-transparent"},M=t("td",{colspan:"4",class:"text-end border-0"},"總計",-1),z={class:"text-end border-0"},K={class:"d-flex justify-content-between mb-4"};function G(s,e,m,$,a,u){const p=c("router-link");return l(),i(g,null,[t("table",U,[O,t("tbody",R,[s.carts?(l(!0),i(g,{key:0},P(s.carts,o=>(l(),i("tr",{key:o.id},[t("td",null,[h(d(o.product.title)+" ",1),o.coupon?(l(),i("div",S,"已套用優惠券")):b("",!0)]),t("td",L,d(o.product.price),1),t("td",H,d(o.qty),1),t("td",N,d(o.total),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:_=>s.deleteOneCart(o.id),disabled:o.id===a.loadingItem},[a.loadingItem===o.id?(l(),i("i",j)):b("",!0),h(" x ")],8,F)])]))),128)):b("",!0)]),t("tfoot",q,[t("tr",null,[M,t("td",z,d(a.finalTotal),1)])])]),t("div",K,[t("button",{class:"btn btn-danger",type:"button",onClick:e[0]||(e[0]=(...o)=>u.swalClearCart&&u.swalClearCart(...o))}," 清空商品 "),n(p,{class:"btn btn-secondary",type:"button",to:"/products"},{default:w(()=>[h("想點更多")]),_:1})])],64)}const J=V(D,[["render",G]]),{VITE_APP_URL:Q,VITE_APP_PATH:W}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w8/",MODE:"production",DEV:!1,PROD:!0},X={data(){return{products:[],productID:"",finalTotal:"",form:{user:{name:"",tel:"",address:"",email:"no-email"},message:"",orderStatus:""},visible:!1}},methods:{cartNoData(){this.$swal({icon:"info",showConfirmButton:!1,title:"Oops! 你還沒選任何東西，來去挑想吃的吧~",timer:3e3}),this.$router.push("/products")},createOrder(){const s=this.form;this.$http.post(`${Q}/v2/api/${W}/order`,{data:s}).then(e=>{const{orderId:m}=e.data;this.$swal(e.data.message),this.$refs.form.resetForm(),this.$router.push(`/cartfinal/${m}`)}).catch(e=>{this.swalError(e)})},...T(k,["swalError","swalToastTopEnd"])},computed:{...y(f,["carts"])},components:{FrontCart:J},mounted(){this.getCartData(),this.visible=!0,document.title="鮮堡漢堡 文化店 | 購物車"}},Y={class:"w-100 position-relative z-2"},Z={class:"common-hero container"},tt=t("div",{class:"position-relative m-5"},[t("div",{class:"progress bg-third",style:{height:"2px"}},[t("div",{class:"progress-bar bg-danger",role:"progressbar","aria-label":"Progress",style:{width:"33.33%"},"aria-valuenow":"33.33","aria-valuemin":"0","aria-valuemax":"100"})]),t("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-danger rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-0 translate-middle pt-6 fs-7 fw-bold"}," 選擇餐點 "),t("button",{type:"button",class:"position-absolute top-0 start-33 translate-middle btn btn-sm btn-danger rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-33 translate-middle pt-6 fs-7 fw-bold"}," 訂購資料 "),t("button",{type:"button",class:"position-absolute top-0 start-66 translate-middle btn btn-sm btn-third rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-66 translate-middle pt-6 fs-7 text-secondary"}," 餐點準備中 "),t("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-third rounded-pill",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-100 translate-middle pt-6 fs-7 text-secondary text-nowrap"}," 完成取餐 ")],-1),et={class:"row row-cols-1 row-cols-lg-2 p-1 pb-6"},st={class:"col"},ot={class:"col"},at={class:"row justify-content-center bg-third rounded rounded-4 rounded-lg-6 p-4 p-md-7"},nt=t("h2",null,"請輸入訂購資料",-1),rt={class:"mb-3"},lt=t("label",{for:"desk",class:"form-label"},"桌次",-1),it=t("option",{selected:"",value:"take-out"},"外帶",-1),dt=t("option",{value:"1"},"1",-1),ct=t("option",{value:"2"},"2",-1),ut=t("option",{value:"3"},"3",-1),mt=t("option",{value:"5"},"5",-1),pt=t("option",{value:"6"},"6",-1),_t=t("option",{value:"7"},"7",-1),ht=t("option",{value:"8"},"8",-1),bt=t("option",{value:"9"},"9",-1),ft={class:"mb-3"},wt=t("label",{for:"name",class:"form-label"},"訂購人姓名",-1),vt={class:"mb-3"},gt=t("label",{for:"tel",class:"form-label"},"聯絡電話",-1),xt={class:"mb-3"},yt=t("label",{for:"message",class:"form-label"},"備註留言",-1),Tt=t("div",{class:"text-center w-100"},[t("button",{type:"submit",class:"btn btn-danger w-100"},"送出訂單")],-1);function Vt(s,e,m,$,a,u){const p=c("front-cart"),o=c("v-field"),_=c("error-message"),C=c("v-form");return l(),i("main",Y,[t("section",Z,[tt,t("div",et,[t("div",st,[n(p)]),t("div",ot,[t("div",at,[nt,n(C,{ref:"form",onSubmit:u.createOrder},{default:w(({errors:v})=>[t("div",rt,[lt,n(o,{name:"desk",as:"select",class:"form-select",modelValue:a.form.user.address,"onUpdate:modelValue":e[0]||(e[0]=r=>a.form.user.address=r)},{default:w(()=>[it,dt,ct,ut,mt,pt,_t,ht,bt]),_:1},8,["modelValue"])]),t("div",ft,[wt,n(o,{id:"name",name:"姓名",type:"text",class:x(["form-control",{"is-invalid":v.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:a.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=r=>a.form.user.name=r)},null,8,["class","modelValue"]),n(_,{name:"姓名",class:"invalid-feedback"})]),t("div",vt,[gt,n(o,{id:"tel",name:"電話",type:"text",class:x(["form-control",{"is-invalid":v.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:a.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=r=>a.form.user.tel=r)},null,8,["class","modelValue"]),n(_,{name:"電話",class:"invalid-feedback"})]),t("div",xt,[yt,E(t("textarea",{id:"message",class:"form-control",placeholder:"如果有任何餐點製作需求，您可在此留言，我們將盡量配合。",cols:"30",rows:"10","onUpdate:modelValue":e[3]||(e[3]=r=>a.form.message=r)},null,512),[[A,a.form.message]])]),Tt]),_:1},8,["onSubmit"])])])])])])}const Et=V(X,[["render",Vt]]);export{Et as default};
