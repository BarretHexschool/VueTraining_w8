import{A as m,M as b}from"./AdminPagination-bcadfade.js";import{_ as g,r as O,o as n,c as r,b as e,F as a,i,d as y,t,e as v}from"./index-f71c5a61.js";import"./base-component-44aab0bc.js";const{VITE_APP_URL:u,VITE_APP_PATH:p}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w8/",MODE:"production",DEV:!1,PROD:!0};let h="";const f={data(){return{orders:[],tempOrder:{},pageData:{}}},methods:{getOrders(l=1){this.$http.get(`${u}/v2/api/${p}/admin/orders?page=${l}`).then(d=>{this.orders=d.data.orders,this.pageData=d.data.pagination,console.log(d)}).catch(d=>{console.dir(d)})},updateOrder(l){console.log("改變狀態"),l.status=2,l.buyerMessage="強制塞入",console.log(l),this.$http.put(`${u}/v2/api/${p}/admin/order/${l.id}`,{order:l}).then(d=>{console.log(d)}).catch(d=>{console.dir(d)})},openOrderModal(l){this.tempOrder={...l},h.show()}},components:{AdminPagination:m},mounted(){this.getOrders(),h=new b(document.querySelector("#orderModal"),{keyboard:!1}),document.title="訂單管理 | 鮮堡漢堡"}},M={class:"container py-3"},D=e("h2",{class:"ls-2"},"訂單管理",-1),P={class:"table table-hover"},V=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"訂單ID"),e("th",{scope:"col"},"訂單號碼"),e("th",{scope:"col"},"訂單時間"),e("th",{scope:"col"},"訂購人"),e("th",{scope:"col"},"訂單總額"),e("th",{scope:"col"},"付款狀態"),e("th",{scope:"col"},"產品製作進度"),e("th",{scope:"col"},"功能")])],-1),A=["onClick"],E={class:"d-flex justify-content-center"},w={class:"modal fade",id:"orderModal",ref:"orderModal",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true"},T={class:"modal-dialog modal-dialog-centered modal-xl"},Y={class:"modal-content"},k={class:"modal-header"},H={class:"modal-title fs-5",id:"orderModalLabel"},L=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),x={class:"modal-body"},C={class:"row row-cols-3"},I={class:"cols"},S={class:"cols"},B={class:"cols"},R={class:"cols"},N={class:"table table-bordered"},U=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"品名"),e("th",{scope:"col"},"單價"),e("th",{scope:"col"},"數量"),e("th",{scope:"col"},"總價")])],-1),q=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1);function F(l,d,j,z,o,c){const _=O("admin-pagination");return n(),r(a,null,[e("div",M,[D,e("table",P,[V,e("tbody",null,[(n(!0),r(a,null,i(o.orders,s=>(n(),r("tr",{key:s.id},[e("th",null,t(s.id.substr(-4,4)),1),e("th",null,"#"+t(s.num),1),e("th",null,t(l.$moment(new Date(s.create_at*1e3)).format("YYYY-MM-DD HH:mm")),1),e("th",null,t(s.user.name)+" "+t(),1),e("td",null,t(s.total),1),e("td",null,t(s.is_paid),1),e("td",null,t(s.buyerMessage),1),e("td",null,[e("button",{type:"button",class:"btn btn-primary",onClick:G=>c.openOrderModal(s)}," 查看訂單 ",8,A)])]))),128))])]),e("div",E,[y(_,{"page-data":o.pageData,"get-products":c.getOrders},null,8,["page-data","get-products"])])]),e("div",w,[e("div",T,[e("div",Y,[e("div",k,[e("h1",H," 訂單編號#"+t(o.tempOrder.num)+" ("+t(o.tempOrder.id)+") ",1),L]),e("div",x,[e("h3",null,"訂單狀態："+t(o.tempOrder.orderStatues?o.tempOrder.orderStatues:"接收訂單"),1),e("h2",null,t(o.tempOrder.address?`內用：${o.tempOrder.address}`:"外帶"),1),e("div",C,[e("div",I," 訂單日期："+t(l.$moment(new Date(o.tempOrder.create_at*1e3)).format("YYYY-MM-DD HH:mm")),1),e("div",S,"訂購姓名："+t(o.tempOrder.user?o.tempOrder.user.name:""),1),e("div",B,"連絡電話："+t(o.tempOrder.user?o.tempOrder.user.tel:""),1),e("div",R,"客戶備註："+t(o.tempOrder.message),1)]),e("table",N,[U,e("tbody",null,[(n(!0),r(a,null,i(o.tempOrder.products,s=>(n(),r("tr",{key:s.id},[e("td",null,t(s.product.title),1),e("td",null,t(s.product.price),1),e("td",null,t(s.qty),1),e("td",null,t(s.total),1),v(" "+t(l.product),1)]))),128))])])]),q])])],512)],64)}const W=g(f,[["render",F]]);export{W as default};
